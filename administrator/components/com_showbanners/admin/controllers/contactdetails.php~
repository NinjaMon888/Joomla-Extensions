<?php
defined( '_JEXEC' ) or die( 'Restricted access' );
require_once( JPATH_COMPONENT.DS.'controller.php' );

jimport('joomla.application.component.controller');

class jticketingControllercontactdetails extends JController
{

	function __construct()
	{
		parent::__construct();

		// Register Extra tasks
		$this->registerTask( 'add'  , 	'edit' );
		
	}
	
	function edit()
	{
		JRequest::setVar( 'view', 'addseries' );
		JRequest::setVar( 'layout', 'form'  );
		parent::display();		
	}
	

	function save()
	{
		$id = JRequest::getVar('cid');
        $model =& $this->getModel('addseries');
        
        //get data from request
        $post = JRequest::get('post');
        if($id!=0)
        {
         	if ($model->delete($id)) 
         	{
				$message = JText::_('delete Successful');
         	}
        }
 		
 		// let the model save it
        if ($model->store()) 
        {
            $message = JText::_('Store Successful');
            $itemid=JRequest::getInt('Itemid');
            $this->setRedirect('index.php?option=com_videoseries&view=listseries&Itemid='.$itemid, $message);
        } 
        else
        {
		    $message = JText::_('Error while saving');		
		    $itemid=JRequest::getInt('Itemid');    
		    $this->setRedirect('index.php?option=com_videoseries&view=addseries&layout=form&Itemid='.$itemid, $message);
        }
        
        
	}
	
	
	function cancel()
	{
		$msg = JText::_( 'Operation Cancelled' );
		$itemid=JRequest::getInt('Itemid');
		$this->setRedirect( 'index.php?option=com_videoseries&Itemid='.$itemid, $msg );
	}

}
